# 眼镜端数据交互API文档

## 1. 向眼镜端发送数据

### 功能说明
向眼镜端发送流数据，需确保设备处于蓝牙连接状态。

### 方法定义
```kotlin
fun sendStream(type: ValueUtil.CxrStreamType, stream: ByteArray, fileName: String): ValueUtil.CxrStatus? {
    return CxrApi.getInstance().sendStream(type, stream, fileName, streamCallback)
}
```

### 参数说明
- `type`: 流数据类型，参考`ValueUtil.CxrStreamType`，如`WORD_TIPS`表示提词器文字
- `stream`: 字节数组形式的流数据
- `fileName`: 文件名

### 回调处理
```kotlin
val streamCallback = object : SendStatusCallback{
    override fun onSendSucceed() {
        // 发送成功回调
    }
    
    override fun onSendFailed(errorCode: ValueUtil.CxrSendErrorCode?) {
        // 发送失败回调，包含错误码
    }
}
```

### 返回值
`ValueUtil.CxrStatus`枚举值：
- `REQUEST_SUCCEED`: 请求成功
- `REQUEST_WAITING`: 请求等待中，请勿重复请求
- `REQUEST_FAILED`: 请求失败

## 2. 读取眼镜端未同步媒体文件

### 功能说明
获取眼镜端未同步的媒体文件数量，需确保设备处于蓝牙连接状态。

### 方法定义
```kotlin
fun getUnsyncNum(): ValueUtil.CxrStatus? {
    return CxrApi.getInstance().getUnsyncNum(unSyncCallback)
}
```

### 回调处理
```kotlin
private val unSyncCallback = object : UnsyncNumResultCallback{
    override fun onUnsyncNumResult(
        status: ValueUtil.CxrStatus?, 
        audioNum: Int, 
        pictureNum: Int, 
        videoNum: Int
    ) {
        // status: 响应状态
        // audioNum: 未同步音频文件数量
        // pictureNum: 未同步图片文件数量
        // videoNum: 未同步视频文件数量
    }
}
```

### 返回值
`ValueUtil.CxrStatus`枚举值：
- `REQUEST_SUCCEED`: 请求成功
- `REQUEST_WAITING`: 请求等待中，请勿重复请求
- `REQUEST_FAILED`: 请求失败

## 3. 监听眼镜端媒体文件更新

### 功能说明
设置监听器以获取眼镜端媒体文件的更新通知。

### 方法定义
```kotlin
fun setMediaFilesUpdateListener(set: Boolean){
    CxrApi.getInstance().setMediaFilesUpdateListener(if (set) mediaFileUpdateListener else null)
}
```

### 参数说明
- `set`: true表示设置监听器，false表示移除监听器

### 监听器实现
```kotlin
private val mediaFileUpdateListener = object : MediaFilesUpdateListener {
    override fun onMediaFilesUpdated() {
        // 媒体文件更新时回调
    }
}
```

## 4. 同步媒体文件

### 功能说明
从眼镜端同步媒体文件，需要使用Wi-Fi通信模块，请在同步前完成Wi-Fi模块初始化。

### 4.1 同步指定类型所有文件

#### 方法定义
```kotlin
fun startSync(svaePaht: String, types: Array<ValueUtil.CxrMediaType>): Boolean {
    return CxrApi.getInstance().startSync(svaePaht, types, syncCallback)
}
```

#### 参数说明
- `svaePaht`: 文件存储路径（需注意文件管理权限）
- `types`: 同步文件类型数组，`ValueUtil.CxrMediaType`枚举值包括：
  - `AUDIO`: 音频文件
  - `PICTURE`: 图片文件
  - `VIDEO`: 视频文件
  - `ALL`: 所有文件

#### 同步回调
```kotlin
private val syncCallback = object : SyncStatusCallback{
    override fun onSyncStart() {
        // 开始同步时回调
    }
    
    override fun onSingleFileSynced(fileName: String?) {
        // 单个文件同步成功时回调，fileName为成功同步的文件名
    }
    
    override fun onSyncFailed() {
        // 同步失败时回调
    }
    
    override fun onSyncFinished() {
        // 同步完成时回调
    }
}
```

#### 返回值
- `true`: 请求成功
- `false`: 请求失败

### 4.2 同步单个文件

#### 方法定义
```kotlin
fun syncSingleFiles(savePath: String , mediaType: ValueUtil.CxrMediaType, fileName: String): Boolean {
    return CxrApi.getInstance().syncSingleFile(savePath, mediaType, fileName, syncCallback)
}
```

#### 参数说明
- `savePath`: 文件存储路径
- `mediaType`: 文件类型，`ValueUtil.CxrMediaType`枚举值
- `filePath`: 眼镜端文件路径

#### 返回值
- `true`: 请求成功
- `false`: 请求失败

### 4.3 停止同步

#### 方法定义
```kotlin
private fun stopSync() {
    CxrApi.getInstance().stopSync()
}
```